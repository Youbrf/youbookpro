{"version":3,"file":"booking/view.js","mappings":";;;;;;;;;;AAAa;;AAEb,QAAQ,mBAAO,CAAC,4BAAW;AAC3B,IAAI,KAAqC,EAAE,EAG1C,CAAC;AACF;AACA,EAAE,kBAAkB;AACpB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,EAAE,mBAAmB;AACrB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;;;;;;;;;ACxBA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACNmD;AACL;AAAA;AAE9C,SAASQ,YAAYA,CAAA,EAAG;EACpB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,+CAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACU,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGX,+CAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,+CAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,+CAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,+CAAQ,CAAC,IAAI,CAAC;EAExC,MAAMkB,aAAa,GAAIC,OAAO,IAAK;IAC/BR,mBAAmB,CAACS,IAAI,IAAI;MACxB,MAAMC,MAAM,GAAGD,IAAI,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC;MAClD,IAAIH,MAAM,EAAE;QACRJ,QAAQ,CAAC,IAAI,CAAC;QACd,OAAOG,IAAI,CAACK,MAAM,CAACF,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC;MAChD,CAAC,MAAM;QACH,IAAIJ,IAAI,CAACM,MAAM,IAAI,CAAC,EAAE;UAClBT,QAAQ,CAAC,sDAAsD,CAAC;UAChE,OAAOG,IAAI;QACf;QACAH,QAAQ,CAAC,IAAI,CAAC;QACd,OAAO,CAAC,GAAGG,IAAI,EAAED,OAAO,CAAC;MAC7B;IACJ,CAAC,CAAC;EACN,CAAC;EAIDlB,gDAAS,CAAC,MAAM;IACZ0B,KAAK,CAAC,iCAAiC,CAAC,CACnCC,IAAI,CAACC,QAAQ,IAAI;MACd,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;MACxD;MACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC1B,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,IAAI;MACVpB,WAAW,CAACoB,IAAI,CAAC;MACjBlB,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,CACDmB,KAAK,CAAClB,KAAK,IAAI;MACZmB,OAAO,CAACnB,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;MAC/DD,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC;EACV,CAAC,EAAE,EAAE,CAAC;EAENd,gDAAS,CAAC,MAAM;IAChB,IAAIe,KAAK,EAAE;MACP,MAAMoB,KAAK,GAAGC,UAAU,CAAC,MAAMpB,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;MACpD,OAAO,MAAMqB,YAAY,CAACF,KAAK,CAAC;IACpC;EACA,CAAC,EAAE,CAACpB,KAAK,CAAC,CAAC;EAEX,oBACIV,uDAAA;IAAKiC,SAAS,EAAC,oBAAoB;IAAAC,QAAA,GAE9BhC,IAAI,KAAK,CAAC,iBACPF,uDAAA;MAAKiC,SAAS,EAAC,kBAAkB;MAAAC,QAAA,GAC5B1B,OAAO,gBACJV,sDAAA;QAAAoC,QAAA,EAAG;MAA0B,CAAG,CAAC,GAEjCC,MAAM,CAACC,OAAO,CAACC,uBAAuB,CAAC/B,QAAQ,CAAC,CAAC,CAACgC,GAAG,CAAC,CAAC,CAACC,QAAQ,EAAEC,gBAAgB,CAAC,kBAC/ExC,uDAAA;QAAoBiC,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC1CpC,sDAAA;UAAImC,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAAEO,kBAAkB,CAACF,QAAQ;QAAC,CAAK,CAAC,eAClEvC,uDAAA;UAAOiC,SAAS,EAAC,gBAAgB;UAAAC,QAAA,gBAC7BpC,sDAAA;YAAAoC,QAAA,eACIlC,uDAAA;cAAAkC,QAAA,gBACIpC,sDAAA;gBAAAoC,QAAA,EAAI;cAAG,CAAI,CAAC,eACZpC,sDAAA;gBAAAoC,QAAA,EAAI;cAAI,CAAI,CAAC,eACbpC,sDAAA;gBAAAoC,QAAA,EAAI;cAAK,CAAI,CAAC,eACdpC,sDAAA,SAAQ,CAAC;YAAA,CACT;UAAC,CACF,CAAC,eACRA,sDAAA;YAAAoC,QAAA,EACKM,gBAAgB,CAACF,GAAG,CAACzB,OAAO,iBACzBb,uDAAA;cAAAkC,QAAA,gBACIpC,sDAAA;gBAAAoC,QAAA,EAAKO,kBAAkB,CAAC5B,OAAO,CAAC6B,KAAK;cAAC,CAAK,CAAC,eAC5C1C,uDAAA;gBAAAkC,QAAA,GAAKrB,OAAO,CAAC8B,KAAK,EAAC,SAAE;cAAA,CAAI,CAAC,eAC1B3C,uDAAA;gBAAAkC,QAAA,GAAKrB,OAAO,CAAC+B,QAAQ,EAAC,MAAI;cAAA,CAAI,CAAC,eAC/B9C,sDAAA;gBAAAoC,QAAA,eACIpC,sDAAA;kBAAQ+C,OAAO,EAAEA,CAAA,KAAMjC,aAAa,CAACC,OAAO,CAAE;kBAAAqB,QAAA,EACzC9B,gBAAgB,CAACY,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC,GAAG,SAAS,GAAG;gBAAc,CACzE;cAAC,CACT,CAAC;YAAA,GARAL,OAAO,CAACK,EASb,CACP;UAAC,CACC,CAAC;QAAA,CACL,CAAC;MAAA,GAzBFqB,QA0BL,CACR,CACJ,EACA7B,KAAK,iBACFZ,sDAAA;QAAKmC,SAAS,EAAC,aAAa;QAAAC,QAAA,EACvBxB;MAAK,CACL,CACR,EACAN,gBAAgB,CAACgB,MAAM,GAAG,CAAC,iBACxBpB,uDAAA;QAAKiC,SAAS,EAAC,wBAAwB;QAAAC,QAAA,gBACnClC,uDAAA;UAAAkC,QAAA,gBACIpC,sDAAA;YAAAoC,QAAA,EAAS9B,gBAAgB,CAACgB;UAAM,CAAS,CAAC,2CAC1C,eAAApB,uDAAA;YAAAkC,QAAA,GAAQ,GAAC,EAAC9B,gBAAgB,CAAC0C,MAAM,CAAC,CAACC,KAAK,EAAE9B,CAAC,KAAK8B,KAAK,GAAGC,UAAU,CAAC/B,CAAC,CAAC0B,KAAK,CAAC,EAAE,CAAC,CAAC,EAAC,SAAE;UAAA,CAAQ,CAAC;QAAA,CAC1F,CAAC,eACN7C,sDAAA;UAAQ+C,OAAO,EAAEA,CAAA,KAAM1C,OAAO,CAAC,CAAC,CAAE;UAAA+B,QAAA,EAAC;QAAoB,CAAQ,CAAC;MAAA,CAC/D,CACR;IAAA,CACA,CAER,EAEAhC,IAAI,KAAK,CAAC,iBACPF,uDAAA;MAAKiC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC1BpC,sDAAA;QAAAoC,QAAA,EAAI;MAA2B,CAAI,CAAC,eACpCpC,sDAAA;QAAAoC,QAAA,EACK9B,gBAAgB,CAACkC,GAAG,CAACzB,OAAO,iBACzBb,uDAAA;UAAAkC,QAAA,GAAsBO,kBAAkB,CAAC5B,OAAO,CAAC6B,KAAK,CAAC,EAAC,KAAG,EAAC7B,OAAO,CAAC+B,QAAQ,EAAC,MAAI;QAAA,GAAxE/B,OAAO,CAACK,EAAoE,CACxF;MAAC,CACF,CAAC,eACLpB,sDAAA;QAAQ+C,OAAO,EAAEA,CAAA,KAAM1C,OAAO,CAAC,CAAC,CAAE;QAAA+B,QAAA,EAAC;MAAM,CAAQ,CAAC;IAAA,CACjD,CACR;EAAA,CAEA,CAAC;AAGd;AAEA,SAASG,uBAAuBA,CAAC/B,QAAQ,EAAE;EACvC,OAAOA,QAAQ,CAACwC,MAAM,CAAC,CAACG,GAAG,EAAEpC,OAAO,KAAK;IACrC,MAAM0B,QAAQ,GAAG1B,OAAO,CAAC0B,QAAQ,EAAEW,IAAI,IAAI,QAAQ;IACnD,IAAI,CAACD,GAAG,CAACV,QAAQ,CAAC,EAAE;MAChBU,GAAG,CAACV,QAAQ,CAAC,GAAG,EAAE;IACtB;IACAU,GAAG,CAACV,QAAQ,CAAC,CAACY,IAAI,CAACtC,OAAO,CAAC;IAC3B,OAAOoC,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;AACV;AAEA,SAASR,kBAAkBA,CAACW,IAAI,EAAE;EAC9B,MAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;EAC9CF,GAAG,CAACG,SAAS,GAAGJ,IAAI;EACpB,OAAOC,GAAG,CAACI,KAAK;AACpB;AAGAH,QAAQ,CAACI,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAChD,MAAMC,SAAS,GAAGL,QAAQ,CAACM,cAAc,CAAC,yBAAyB,CAAC;EACpE,IAAID,SAAS,EAAE;IACX,MAAME,IAAI,GAAGjE,4DAAU,CAAC+D,SAAS,CAAC;IAClCE,IAAI,CAACC,MAAM,cAAChE,sDAAA,CAACG,YAAY,IAAE,CAAC,CAAC;EACjC;AACJ,CAAC,CAAC,C","sources":["webpack://youbookpro/./node_modules/react-dom/client.js","webpack://youbookpro/external window \"React\"","webpack://youbookpro/external window \"ReactDOM\"","webpack://youbookpro/external window \"ReactJSXRuntime\"","webpack://youbookpro/webpack/bootstrap","webpack://youbookpro/webpack/runtime/compat get default export","webpack://youbookpro/webpack/runtime/define property getters","webpack://youbookpro/webpack/runtime/hasOwnProperty shorthand","webpack://youbookpro/webpack/runtime/make namespace object","webpack://youbookpro/./src/booking/view.js"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","module.exports = window[\"React\"];","module.exports = window[\"ReactDOM\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useState, useEffect } from 'react';\nimport { createRoot } from 'react-dom/client';\n\nfunction BookingBlock() {\n    const [step, setStep] = useState(1);\n    const [selectedServices, setSelectedServices] = useState([]);\n    const [services, setServices] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null); \n\n    const toggleService = (service) => {\n        setSelectedServices(prev => {\n            const exists = prev.find(s => s.id === service.id);\n            if (exists) {\n                setError(null); \n                return prev.filter(s => s.id !== service.id);\n            } else {\n                if (prev.length >= 2) {\n                    setError(\"Vous pouvez sélectionner jusqu'à 2 services maximum.\");\n                    return prev;\n                }\n                setError(null); \n                return [...prev, service];\n            }\n        });\n    };\n\n\n\n    useEffect(() => {\n        fetch('/wp-json/youbookpro/v1/services')\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Erreur de chargement des services');\n                }\n                return response.json();\n            })\n            .then(data => {\n                setServices(data);\n                setLoading(false);\n            })\n            .catch(error => {\n                console.error('Erreur lors du chargement des services:', error);\n                setLoading(false);\n            });\n    }, []);\n\n    useEffect(() => {\n    if (error) {\n        const timer = setTimeout(() => setError(null), 3000); \n        return () => clearTimeout(timer);\n    }\n    }, [error]);\n\n    return (\n        <div className=\"youbookpro-booking\">\n\n            {step === 1 && (\n                <div className=\"services-section\">\n                    {loading ? (\n                        <p>Chargement des services...</p>\n                    ) : (\n                        Object.entries(groupServicesByCategory(services)).map(([category, categoryServices]) => (\n                            <div key={category} className=\"category-block\">\n                                <h4 className=\"category-title\">{decodeHTMLEntities(category)}</h4>\n                                <table className=\"category-table\">\n                                    <thead>\n                                        <tr>\n                                            <th>Nom</th>\n                                            <th>Prix</th>\n                                            <th>Durée</th>\n                                            <th></th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {categoryServices.map(service => (\n                                            <tr key={service.id}>\n                                                <td>{decodeHTMLEntities(service.title)}</td>\n                                                <td>{service.price} €</td>\n                                                <td>{service.duration} min</td>\n                                                <td>\n                                                    <button onClick={() => toggleService(service)}>\n                                                        {selectedServices.find(s => s.id === service.id) ? 'Retirer' : 'Sélectionner'}\n                                                    </button>\n                                                </td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                            </div>\n                        ))\n                    )}\n                    {error && (\n                        <div className=\"error-popup\">\n                            {error}\n                        </div>\n                    )}\n                    {selectedServices.length > 0 && (\n                        <div className=\"next-step-bar centered\">\n                            <div>\n                                <strong>{selectedServices.length}</strong> service(s) sélectionné(s) – \n                                <strong> {selectedServices.reduce((total, s) => total + parseFloat(s.price), 0)} €</strong>\n                            </div>\n                            <button onClick={() => setStep(2)}>Choisir un créneau →</button>\n                        </div>\n                    )}\n                </div>\n                \n            )}\n\n            {step === 2 && (\n                <div className=\"slots-section\">\n                    <h3>Créneaux disponibles pour :</h3>\n                    <ul>\n                        {selectedServices.map(service => (\n                            <li key={service.id}>{decodeHTMLEntities(service.title)} - {service.duration} min</li>\n                        ))}\n                    </ul>\n                    <button onClick={() => setStep(1)}>Retour</button>\n                </div>\n            )}\n\n        </div>\n    );\n\n}\n\nfunction groupServicesByCategory(services) {\n    return services.reduce((acc, service) => {\n        const category = service.category?.name || 'Autres';\n        if (!acc[category]) {\n            acc[category] = [];\n        }\n        acc[category].push(service);\n        return acc;\n    }, {});\n}\n\nfunction decodeHTMLEntities(text) {\n    const txt = document.createElement('textarea');\n    txt.innerHTML = text;\n    return txt.value;\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const container = document.getElementById('youbookpro-booking-root');\n    if (container) {\n        const root = createRoot(container);\n        root.render(<BookingBlock />);\n    }\n});\n"],"names":["React","useState","useEffect","createRoot","jsx","_jsx","jsxs","_jsxs","BookingBlock","step","setStep","selectedServices","setSelectedServices","services","setServices","loading","setLoading","error","setError","toggleService","service","prev","exists","find","s","id","filter","length","fetch","then","response","ok","Error","json","data","catch","console","timer","setTimeout","clearTimeout","className","children","Object","entries","groupServicesByCategory","map","category","categoryServices","decodeHTMLEntities","title","price","duration","onClick","reduce","total","parseFloat","acc","name","push","text","txt","document","createElement","innerHTML","value","addEventListener","container","getElementById","root","render"],"sourceRoot":""}